!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("icesium",[],t):"object"==typeof exports?exports.icesium=t():e.icesium=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t){e.exports=require("cesium")},function(e,t){e.exports=require("fetch-jsonp")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("cesium/Source/Widgets/widgets.css")},function(e,t,r){"use strict";r.r(t),r.d(t,"CesiumContainer",(function(){return y}));r(3);var n=r(0);const o=52.35987755982988,i=3.141592653589793,s=.006693421622965943,a=6378245;function c(e,t){let r=function(e,t){let r=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return r+=2*(20*Math.sin(6*e*i)+20*Math.sin(2*e*i))/3,r+=2*(20*Math.sin(t*i)+40*Math.sin(t/3*i))/3,r+=2*(160*Math.sin(t/12*i)+320*Math.sin(t*i/30))/3,r}(e-105,t-35),n=function(e,t){let r=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return r+=2*(20*Math.sin(6*e*i)+20*Math.sin(2*e*i))/3,r+=2*(20*Math.sin(e*i)+40*Math.sin(e/3*i))/3,r+=2*(150*Math.sin(e/12*i)+300*Math.sin(e/30*i))/3,r}(e-105,t-35);const o=t/180*i;let c=Math.sin(o);c=1-s*c*c;const l=Math.sqrt(c);r=180*r/(a*(1-s)/(c*l)*i),n=180*n/(a/l*Math.cos(o)*i);const u=2*e-(e+n),h=2*t-(t+r);return[u,h]}function l(e,t){const r=function(e,t){const r=e-.0065,n=t-.006,i=Math.sqrt(r*r+n*n)-2e-5*Math.sin(n*o),s=Math.atan2(n,r)-3e-6*Math.cos(r*o),a=i*Math.cos(s),c=i*Math.sin(s);return[a,c]}(e,t),n=c(r[0],r[1]);return n}l(113,23),c(129.1312655-10,24.4487351);class u{static getWgs84xy(e,t){return l(e,t)}}var h=r(1),m=r.n(h);class d{constructor(){}}d.jsonp=class{constructor(){}static base(e){return m()(e).then(e=>e.json())}},d.cesium=class{constructor(){}static baiduMap(e){const t=["http://api.map.baidu.com/place/v2/search?","query=",e,"&region=","中国","&output=json&ak=","UDlMuhOMfdTRVKqtQqLiKg8oH6Lxnagt"].join("");return d.jsonp.base(t)}};var p=r(2),g=r.n(p);class f{constructor(e){this.addDataToGlobe=e=>{console.log(e);const t=[];for(let r=0;r<e.length;r++)for(let o=0;o<e[r].geometry.coordinates.length;o++){const i=e[r].geometry.coordinates[o].toString().split(",").map(e=>Number(e)),s=new n.PolygonGeometry({polygonHierarchy:new n.PolygonHierarchy(n.Cartesian3.fromDegreesArray(i)),vertexFormat:n.PerInstanceColorAppearance.VERTEX_FORMAT}),a=n.PolygonGeometry.createGeometry(s);t.push(new n.GeometryInstance({geometry:a,attributes:{color:n.ColorGeometryInstanceAttribute.fromColor(n.Color.fromRandom({alpha:.7}))}}))}const r=new n.Primitive({geometryInstances:t,appearance:new n.PerInstanceColorAppearance({translucent:!0,closed:!1}),asynchronous:!1});this.viewer.scene.primitives.add(r)},this.viewer=e.viewer,this.getData()}getData(){g.a.get("https://v-edu.org.cn/sre/file/map/geoatlas/100000_full.json",{params:{}}).then(e=>{console.log("返回结果==>",e),this.addDataToGlobe(e.data.features)}).catch((function(e){console.log(e)}))}}window.CESIUM_BASE_URL="https://v-edu.org.cn/sre/file/map/cesium",n.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzODAwZjJkYS02MmMyLTRhYjctYjZlMy04N2JiNDY5Mjg0M2IiLCJpZCI6MjQ0MTMsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1ODUxOTM5MDN9.ImztRbucAywyYtlbPc2pxo_H4dnMAlOn1SZv2z4bAlU";class y{constructor(e){this._googleMap=()=>{var e=new n.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"});this.viewer.imageryLayers.addImageryProvider(e)},this._mapboxMap=()=>{const e=new n.MapboxStyleImageryProvider({url:"https://api.mapbox.com/styles/v1",username:"qq793931289",styleId:"ckatbx8pa43341insqhces8m3",accessToken:"pk.eyJ1IjoicXE3OTM5MzEyODkiLCJhIjoiY2s5M3oxbmFzMDdrczNlbXpibDI0bTQxYiJ9.GuZhkGBTu6vkisVE7CKGeA",scaleFactor:!0});this.mapboxMap=this.viewer.imageryLayers.addImageryProvider(e)},this.init(e),console.log("cesium update 1.0.3")}componentDidMount(){}init(e){this.viewer=new n.CesiumWidget(e.id||"cesiumContainer",{imageryProvider:!1,scene3DOnly:!0,requestRenderMode:!0,maximumRenderTimeChange:1/0}),this.viewer.scene.debugShowFramesPerSecond=!0,this.viewer.scene.screenSpaceCameraController.maximumZoomDistance=3e7,this.viewer.scene.skyBox&&(this.viewer.scene.skyBox.show=!1),this.viewer.scene.sun=new n.Sun,this.viewer.scene.sun.show=!1,this.viewer.scene.moon=new n.Moon({show:!1}),this._googleMap(),n.Camera.DEFAULT_VIEW_RECTANGLE=n.Rectangle.fromDegrees(113.2759952545166,23.117055306224895,114,24),this.viewer.camera.setView({destination:n.Cartesian3.fromDegrees(113.48,23,15e4),orientation:{}}),this.initAdcode()}initAdcode(){new f({viewer:this.viewer})}async search(e){var t;null===(t=this.viewer)||void 0===t||t.scene.primitives.removeAll();const r=this.viewer.scene.primitives.add(new n.LabelCollection),o=this.viewer.scene.primitives.add(new n.PointPrimitiveCollection);d.cesium.baiduMap(e).then(e=>{var t;if(0!=e.results.length&&e.results[0]&&e.results[0].location&&e.results[0].location.lng){e.results.map(e=>{const t=u.getWgs84xy(e.location.lng,e.location.lat);o.add({position:n.Cartesian3.fromDegrees(t[0],t[1],10),pixelSize:10,color:n.Color.RED.withAlpha(.8)}),r.add({position:n.Cartesian3.fromDegrees(t[0],t[1],10),text:e.name,horizontalOrigin:n.HorizontalOrigin.CENTER,verticalOrigin:n.VerticalOrigin.TOP,scaleByDistance:new n.NearFarScalar(10,.5,5e3,.5),fillColor:n.Color.YELLOW.withAlpha(.8)}),this.viewer.scene.requestRender()});const i=u.getWgs84xy(e.results[0].location.lng,e.results[0].location.lat);null===(t=this.viewer)||void 0===t||t.camera.flyTo({destination:n.Cartesian3.fromDegrees(i[0],i[1],1e3),orientation:new n.HeadingPitchRange(0,-1.57,1e3),duration:3,maximumHeight:5e4})}else alert("tips:未找到位置!")})}}}])}));
//# sourceMappingURL=index.js.map