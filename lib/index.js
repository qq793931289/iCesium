!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("icesium",[],t):"object"==typeof exports?exports.icesium=t():e.icesium=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){e.exports=require("cesium")},function(e,t){e.exports=require("fetch-jsonp")},function(e,t){e.exports=require("cesium/Source/Widgets/widgets.css")},function(e,t,i){"use strict";i.r(t),i.d(t,"CesiumContainer",(function(){return p}));i(2);var n=i(0);const r=52.35987755982988,s=3.141592653589793,o=.006693421622965943,a=6378245;function c(e,t){let i=function(e,t){let i=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*s)+20*Math.sin(2*e*s))/3,i+=2*(20*Math.sin(t*s)+40*Math.sin(t/3*s))/3,i+=2*(160*Math.sin(t/12*s)+320*Math.sin(t*s/30))/3,i}(e-105,t-35),n=function(e,t){let i=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*s)+20*Math.sin(2*e*s))/3,i+=2*(20*Math.sin(e*s)+40*Math.sin(e/3*s))/3,i+=2*(150*Math.sin(e/12*s)+300*Math.sin(e/30*s))/3,i}(e-105,t-35);const r=t/180*s;let c=Math.sin(r);c=1-o*c*c;const u=Math.sqrt(c);i=180*i/(a*(1-o)/(c*u)*s),n=180*n/(a/u*Math.cos(r)*s);const l=2*e-(e+n),h=2*t-(t+i);return[l,h]}function u(e,t){const i=function(e,t){const i=e-.0065,n=t-.006,s=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*r),o=Math.atan2(n,i)-3e-6*Math.cos(i*r),a=s*Math.cos(o),c=s*Math.sin(o);return[a,c]}(e,t),n=c(i[0],i[1]);return n}u(113,23),c(129.1312655-10,24.4487351);class l{static getWgs84xy(e,t){return u(e,t)}}var h=i(1),d=i.n(h);class m{constructor(){}}m.jsonp=class{constructor(){}static base(e){return d()(e).then(e=>e.json())}},m.cesium=class{constructor(){}static baiduMap(e){const t=["http://api.map.baidu.com/place/v2/search?","query=",e,"&region=","中国","&output=json&ak=","UDlMuhOMfdTRVKqtQqLiKg8oH6Lxnagt"].join("");return m.jsonp.base(t)}},window.CESIUM_BASE_URL="https://v-edu.org.cn/sre/file/map/cesium",n.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzODAwZjJkYS02MmMyLTRhYjctYjZlMy04N2JiNDY5Mjg0M2IiLCJpZCI6MjQ0MTMsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1ODUxOTM5MDN9.ImztRbucAywyYtlbPc2pxo_H4dnMAlOn1SZv2z4bAlU";class p{constructor(e){this._googleMap=()=>{var e=new n.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"});this.viewer.imageryLayers.addImageryProvider(e)},this._mapboxMap=()=>{const e=new n.MapboxStyleImageryProvider({url:"https://api.mapbox.com/styles/v1",username:"qq793931289",styleId:"ckatbx8pa43341insqhces8m3",accessToken:"pk.eyJ1IjoicXE3OTM5MzEyODkiLCJhIjoiY2s5M3oxbmFzMDdrczNlbXpibDI0bTQxYiJ9.GuZhkGBTu6vkisVE7CKGeA",scaleFactor:!0});this.mapboxMap=this.viewer.imageryLayers.addImageryProvider(e)},this.init(e)}componentDidMount(){}init(e){this.viewer=new n.CesiumWidget(e.id||"cesiumContainer",{imageryProvider:!1,scene3DOnly:!0,requestRenderMode:!0,maximumRenderTimeChange:1/0}),this.viewer.scene.debugShowFramesPerSecond=!0,this.viewer.scene.screenSpaceCameraController.maximumZoomDistance=3e7,this.viewer.scene.skyBox&&(this.viewer.scene.skyBox.show=!1),this.viewer.scene.sun=new n.Sun,this.viewer.scene.sun.show=!1,this.viewer.scene.moon=new n.Moon({show:!1}),this._googleMap(),n.Camera.DEFAULT_VIEW_RECTANGLE=n.Rectangle.fromDegrees(113.2759952545166,23.117055306224895,114,24),this.viewer.camera.setView({destination:n.Cartesian3.fromDegrees(113.48,23,15e4),orientation:{}})}async search(e){var t;null===(t=this.viewer)||void 0===t||t.scene.primitives.removeAll();const i=this.viewer.scene.primitives.add(new n.LabelCollection),r=this.viewer.scene.primitives.add(new n.PointPrimitiveCollection);m.cesium.baiduMap(e).then(e=>{var t;if(0!=e.results.length&&e.results[0]&&e.results[0].location&&e.results[0].location.lng){e.results.map(e=>{const t=l.getWgs84xy(e.location.lng,e.location.lat);r.add({position:n.Cartesian3.fromDegrees(t[0],t[1],10),pixelSize:10,color:n.Color.RED.withAlpha(.8)}),i.add({position:n.Cartesian3.fromDegrees(t[0],t[1],10),text:e.name,horizontalOrigin:n.HorizontalOrigin.CENTER,verticalOrigin:n.VerticalOrigin.TOP,scaleByDistance:new n.NearFarScalar(10,.5,5e3,.5),fillColor:n.Color.YELLOW.withAlpha(.8)}),this.viewer.scene.requestRender()});const s=l.getWgs84xy(e.results[0].location.lng,e.results[0].location.lat);null===(t=this.viewer)||void 0===t||t.camera.flyTo({destination:n.Cartesian3.fromDegrees(s[0],s[1],1e3),orientation:new n.HeadingPitchRange(0,-1.57,1e3),duration:3,maximumHeight:5e4})}else alert("tips:未找到位置!")})}}}])}));
//# sourceMappingURL=index.js.map